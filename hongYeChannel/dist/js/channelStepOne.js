$(function(){function e(){$.ajax({url:serverIP+channelUrl,type:"POST",data:JSON.stringify({func:randomCode,data:{}}),contentType:"application/json",crossDomain:!0,success:function(e){0==e.retHead&&($("#randomCodeImg").attr("src","data:image/jpg;base64,"+e.data.image),r=e.data.UUID)},error:function(e){console.error("服务器异常！")}})}function a(){var a=$("#nameNo").val().trim(),c=$("#randomCode").val().trim();return a?c?void $.ajax({url:serverIP+channelUrl,type:"POST",data:JSON.stringify({func:fetchChannelCode,data:{recommenderName:a,UUID:r,code:c}}),contentType:"application/json",crossDomain:!0,success:function(a){0==a.retHead?a.data.result.length>0&&(n=a.data.result[0].CHANNEL_ID,o=a.data.result[0].CHANNEL_NAM,t=!0,window.location.href="view/createQrCode.html?userName="+encodeURIComponent(o)+"&channelID="+n):($("#dialogContent").html(a.desc),$("#flagUserDialog").modal(flagUserDialog),e(),$("#randomCode").val(""))},error:function(e){console.log("服务器异常！")}}):($("#errorMsg").css("display","block"),void $("#errorMsg").html("请输入验证码")):($("#errorMsg").css("display","block"),void $("#errorMsg").html("请输入渠道号"))}var n,o,r,t=!1;e(),$("#randomCodeImg").click(e),$("#nextBtn").click(function(){a()}),$("#nextBtn").blur(function(){$("#errorMsg").css("display","none")}),$("#sysTitle").html(companyName+"渠道管理系统")});